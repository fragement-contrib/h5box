import{i as B}from"./index.umd.min-b64a4e47.js";import{d as H,r as L,f as O,c as q,u as S,o as F,_ as J}from"./index-c6acef26.js";var U=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},E={exports:{}};/*!
 * PointIn v0.1.1
 * git+https://github.com/oi-contrib/PointIn.git
 */(function(w,D){(function(u,x){w.exports=x()})(U,function(){var u=function(i,t,e,l){return!(e>0&&i<0)&&(e<0&&i>0||(e>0&&i>0?l<t:e<0&&i<0?l>t:e==0&&i==0?l<t:e==0?!(i<0)&&l<t:e<0||l<t))},x=function(i,t){this.x=i||0,this.y=t||0};return x.prototype.setPoint=function(i,t){return this.x=i,this.y=t,this},x.prototype.arc=function(i,t,e,l,g,b){if(e>l){var v=e;e=l,l=v}if(this.circle(i,t,e)||!this.circle(i,t,l))return!1;var r,o;b>=0?(r=g,o=g+b):(o=g,r=g+b),r%=2*Math.PI,o%=2*Math.PI,r<0&&(r+=2*Math.PI),o<0&&(o+=2*Math.PI);var s=Math.sqrt((i-this.x)*(i-this.x)+(t-this.y)*(t-this.y)),c=(this.y-t)/s,M=(this.x-i)/s;return r<o?u(Math.sin(r),Math.cos(r),c,M)&&u(c,M,Math.sin(o),Math.cos(o)):!(u(Math.sin(o),Math.cos(o),c,M)&&u(c,M,Math.sin(r),Math.cos(r)))},x.prototype.circle=function(i,t,e){return!(this.x<i-e||this.x>i+e||this.y<t-e||this.y>t+e)&&(i-this.x)*(i-this.x)+(t-this.y)*(t-this.y)<=e*e},x.prototype.polygon=function(i){i.push(i[0]);for(var t=0,e=0;e<i.length-1;e++){var l=i[e],g=i[e+1];(l[0]!=g[0]||l[1]!=g[1])&&(l[1]-this.y)*(g[1]-this.y)<0&&[l[0]+(g[0]-l[0])*(this.y-l[1])/(g[1]-l[1]),this.y][0]>this.x&&(l[1]<g[1]?t+=1:t-=1)}return t!=0},x.prototype.rect=function(i,t,e,l){return this.x>=i&&this.x<=i+e&&this.y>=t&&this.y<=t+l},x})})(E);const Z=E.exports;let K=+new Date(1968,9,3),N=24*3600*1e3,d=[{name:"1968/9/3",value:Math.round(Math.random()*100)}];for(let w=1;w<2e4;w++){var X=new Date(K+=N);d.push({name:[X.getFullYear(),X.getMonth()+1,X.getDate()].join("/"),value:Math.round((Math.random()-.5)*20+d[w-1].value)})}const Q=H({__name:"index",setup(w){let D="#e94782",u=["rgb(255, 158, 68)","rgb(255, 70, 131)"],x=900,i=500,t={left:55,top:20,right:55,bottom:30},e={x:0,y:0,height:26,width:0,bottom:10,beginIndex:Math.round((d.length-1)*.3),endIndex:Math.round((d.length-1)*.7)},l=d[0].value,g=d[0].value;for(let n of d)n.value>g&&(g=n.value),n.value<l&&(l=n.value);let b=new Z,v=0,r="",o=0,s=0,c=0,M=0,T=null,m={beginIndex:0,endIndex:0},A=L(),V=function(n){!T||(b.setPoint(n.offsetX,n.offsetY),b.rect(o-3,e.y,6,e.height)?r="beginIndex":b.rect(s-3,e.y,6,e.height)?r="endIndex":b.rect(o,e.y-7,s-o,7)&&(v=n.offsetX,m.beginIndex=e.beginIndex,m.endIndex=e.endIndex))},W=function(n){if(r){let f;n.offsetX<=e.x?f=0:n.offsetX>=e.x+e.width?f=e.width:f=n.offsetX-e.x;let h=Math.round(f/c);if(e[r]!=h){if(e[r]=h,e.beginIndex>e.endIndex){let y=e.beginIndex;e.beginIndex=e.endIndex,e.endIndex=y,r=r=="beginIndex"?"endIndex":"beginIndex"}T(!0)}}else if(v){let f=Math.round((n.offsetX-v)/c);m.beginIndex+f<0?f=-m.beginIndex:m.endIndex+f>=d.length&&(f=d.length-m.endIndex-1),e.beginIndex=m.beginIndex+f,e.endIndex=m.endIndex+f,T(!0)}},Y=function(){(r||v)&&(r="",v=0,T(!1))},k,G=n=>new Promise(f=>{if(k)f(k);else{n.config({strokeStyle:"#e8ecf6"}).strokeRect(e.x,e.y,e.width,e.height),n.config({fillStyle:"#ebeff8",lineWidth:2,lineJoin:"round"}).beginPath();for(let h=0;h<d.length;h++){let y=d[h];n.lineTo(e.x+h*c,e.y+e.height-M*(y.value-l))}n.stroke().lineTo(e.x+e.width,e.y+e.height).lineTo(e.x,e.y+e.height).fill(),n.toDataURL().then(h=>{let y=new Image;y.onload=()=>{k=y,f(k)},y.src=h})}});return O(()=>{e.x=t.left,e.y=i-e.height-e.bottom,e.width=x-t.left-t.right,c=e.width/(d.length-1),M=e.height/(g-l);let n=new B.exports.Canvas(A.value,{region:!1});T=B.exports.throttle(f=>{n.config({fillStyle:"white"}).fillRect(0,0,x,i).reset(),G(n).then(h=>{o=e.x+e.beginIndex*c,s=e.x+e.endIndex*c,n.drawImage(h,0,0,x,i).then(()=>{n.config({fillStyle:"rgba(33,150,240,0.2)"}).fillRect(o,e.y,s-o,e.height);let y=s-o;y>20&&n.config({fillStyle:"#dfe5f3"}).fillRect(o,e.y,y,-7).config({fillStyle:"white"}).fillRect(o+y*.5-5,e.y-2,10,-3),n.config({strokeStyle:"#bbc8e3",fillStyle:"white"}).beginPath().moveTo(o,e.y).lineTo(o,e.y+e.height).stroke().beginPath().moveTo(s,e.y).lineTo(s,e.y+e.height).stroke().fullRect(o-3,e.y+5,6,e.height-10).fullRect(s-3,e.y+5,6,e.height-10),f&&n.config({fillStyle:"#aaa",textAlign:"right",fontSize:10}).fillText(d[e.beginIndex].name,o-5,e.y+e.height*.5).config({textAlign:"left"}).fillText(d[e.endIndex].name,s+5,e.y+e.height*.5);let p=d[e.beginIndex].value,_=d[e.beginIndex].value;for(let a=e.beginIndex+1;a<=e.endIndex;a++){let I=d[a];I.value>_&&(_=I.value),I.value<p&&(p=I.value)}u&&(p>0&&(p=0),_<0&&(_=0));let R=B.exports.ruler(_,p,5);p=R[0],_=R[R.length-1];let P=i-t.bottom-e.bottom-e.height,z=a=>P-(a-p)/(_-p)*(P-t.top),j=a=>t.left+(x-t.left-t.right)*(a-e.beginIndex)/(e.endIndex-e.beginIndex);n.config({fillStyle:"#75777f",strokeStyle:"#e0e6f1",textAlign:"right",textBaseline:"middle",fontSize:10,lineWidth:.5});for(let a of R){let I=z(a);n.fillText(a,t.left-2,I).beginPath().moveTo(t.left,I).lineTo(x-t.right,I).stroke()}if(n.config({textBaseline:"top"}).fillText(d[e.endIndex].name,x-t.right,P+5).config({textAlign:"left"}).fillText(d[e.beginIndex].name,t.left,P+5),u){let a=z(0),I=(a-t.top)/(P-t.top);n.beginPath();for(let C=e.beginIndex;C<=e.endIndex;C++)n.lineTo(j(C),z(d[C].value));n.config({fillStyle:n.createLinearGradient(0,t.top,0,P).setColor(0,u[0]).setColor(I,u[1]).setColor(1,u[0]).value()}).lineTo(x-t.right,a).lineTo(t.left,a).fill()}n.config({lineWidth:2,strokeStyle:D}).beginPath();for(let a=e.beginIndex;a<=e.endIndex;a++)n.lineTo(j(a),z(d[a].value));n.stroke()})})},{time:50}),T()}),(n,f)=>(F(),q("div",{class:"container",ref_key:"elRef",ref:A,onMousedown:f[0]||(f[0]=(...h)=>S(V)&&S(V)(...h)),onMousemove:f[1]||(f[1]=(...h)=>S(W)&&S(W)(...h)),onMouseup:f[2]||(f[2]=(...h)=>S(Y)&&S(Y)(...h))},null,544))}});const te=J(Q,[["__scopeId","data-v-abe6c0bb"]]);export{te as default};
